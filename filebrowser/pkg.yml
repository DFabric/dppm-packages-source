package: filebrowser
name: filebrowser
type: app
keywords: [go]
license: Apache-2.0
url: https://filebrowser.github.io/
docs: https://filebrowser.github.io/quick-start/
description: Web File Manager which can be used as a middleware or standalone app
info: File Manager

optdeps:
- git: ">=1.7.1"

version:
  cmd: bin/filebrowser -v
  regex: (?<=filebrowser version ).*

arch:
  self:
    src: https://github.com/filebrowser/filebrowser
    regex: '(?<=data-name="v)[0-9.]+(?=")'
  alias:
    x86-64: amd64
    x86: 386
    armhf: arm
  linux:
    arm64: null
    armhf: null
    x86: null
    x86-64: null
  freebsd:
    x86: null
    x86-64: null
  netbsd:
    armhf: null
    x86: null
    x86-64: null
  openbsd:
    x86: null
    x86-64: null
  darwin:
    x86: null
    x86-64: null

tags:
  latest:
    src: https://github.com/filebrowser/filebrowser/releases/latest
    regex: '(?<=tag/v).*(?=">)'

config:
  port: port
  host: address

exec:
  start: bin/filebrowser -c etc/config.yml

tasks:
  build:
  # Download the archive
  - mkdir_p bin srv/files
  - getfile https://github.com/filebrowser/filebrowser/releases/download/v${VERSION}/${KERNEL}-${ARCH_ALIAS}-filebrowser.tar.gz
  - untar_gz ${KERNEL}-${ARCH_ALIAS}-filebrowser.tar.gz .
  - chmod filebrowser 750
  - mv filebrowser bin/filebrowser
  - rm ${KERNEL}-${ARCH_ALIAS}-filebrowser.tar.gz LICENSE.md README.md
